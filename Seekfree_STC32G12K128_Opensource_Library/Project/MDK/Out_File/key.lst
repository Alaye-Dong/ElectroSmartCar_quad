C251 COMPILER V5.60.0,  key                                                                17/07/23  20:22:16  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE key
OBJECT MODULE PLACED IN .\Out_File\key.obj
COMPILER INVOKED BY: C:\Keil_v5\C251\BIN\C251.EXE key.c XSMALL ROM(HUGE) WARNINGLEVEL(3) BROWSE INCDIR(..\..\Libraries\l
                    -ibraries;..\..\Libraries\seekfree_libraries;..\..\Libraries\seekfree_peripheral;..\CODE;..\USER\inc;..\USER\src) DEBUG P
                    -RINT(.\Out_File\key.lst) OBJECT(.\Out_File\key.obj) 

stmt  level    source

    1          #include "key.h"
    2          
    3          ////¶¨Òå°´¼üÒý½Å
    4          //#define KEY1_PIN    P71
    5          //#define KEY2_PIN    P70       
    6          //#define KEY3_PIN    P72
    7          //#define KEY4_PIN    P73
    8          ////¶¨Òå²¦Âë¿ª¹ØÒý½Å
    9          //#define SW1_PIN                P76
   10          //#define SW2_PIN     P75
   11          
   12          //¶¨Òå°´¼ü´úºÅ
   13          #define KeystrokeONE 1
   14          #define KeystrokeTWO 2
   15          #define KeystrokeTHREE 3
   16          #define KeystrokeFOUR 4
   17          
   18          //²¦Âë¿ª¹Ø×´Ì¬±äÁ¿ ONÎª0
   19          uint8 sw1_status;
   20          uint8 sw2_status;
   21          
   22          //¿ª¹Ø×´Ì¬±äÁ¿
   23          uint8 key1_status = 1;
   24          uint8 key2_status = 1;
   25          uint8 key3_status = 1;
   26          uint8 key4_status = 1;
   27          
   28          //ÉÏÒ»´Î¿ª¹Ø×´Ì¬±äÁ¿
   29          uint8 key1_last_status;
   30          uint8 key2_last_status;
   31          uint8 key3_last_status;
   32          uint8 key4_last_status;
   33          
   34          //¿ª¹Ø±êÖ¾Î»
   35          uint8 key1_flag;
   36          uint8 key2_flag;
   37          uint8 key3_flag;
   38          uint8 key4_flag;
   39          
   40          int Dispay_Codename = 0;       //ÏÔÊ¾Ò³Ãæ´úºÅ
   41          int This_Codename = 0;                  //±¾Ò³Ãæ±àºÅ
   42          uint8 KeystrokeLabel = 0;                       //°´Ñ¹×´Ì¬
   43          uint8 CursorRow= 0; //¹â±êËùÔÚÐÐºÅ
   44          uint8 MenuNextFlag = 0; //¹â±êËùÖ¸²Ëµ¥½øÈë±êÖ¾Î»
   45          uint8 target_value_bit = 0;
   46          
   47          
   48          
   49          void Keystroke_Scan(void)
   50          {
   51   1      
   52   1                      //»ñÈ¡²¦Âë¿ª¹Ø×´Ì¬
   53   1                      sw1_status = SW1_PIN;
   54   1                      sw2_status = SW2_PIN;
   55   1      
   56   1                      //Ê¹ÓÃ´Ë·½·¨ÓÅµãÔÚÓÚ£¬²»ÐèÒªÊ¹ÓÃwhile(1) µÈ´ý£¬±ÜÃâ´¦ÀíÆ÷×ÊÔ´ÀË·Ñ
   57   1                      //±£´æ°´¼ü×´Ì¬
C251 COMPILER V5.60.0,  key                                                                17/07/23  20:22:16  PAGE 2   

   58   1                      key1_last_status = key1_status;
   59   1                      key2_last_status = key2_status;
   60   1                      key3_last_status = key3_status;
   61   1                      key4_last_status = key4_status;
   62   1                      //¶ÁÈ¡µ±Ç°°´¼ü×´Ì¬
   63   1                      key1_status = KEY1_PIN;
   64   1                      key2_status = KEY2_PIN;
   65   1                      key3_status = KEY3_PIN;
   66   1                      key4_status = KEY4_PIN;
   67   1      
   68   1      
   69   1                      //¼ì²âµ½°´¼ü°´ÏÂÖ®ºó  ²¢·Å¿ªÖÃÎ»±êÖ¾Î»
   70   1                      if(key1_status && !key1_last_status)    key1_flag = 1;
   71   1                      if(key2_status && !key2_last_status)    key2_flag = 1;
   72   1                      if(key3_status && !key3_last_status)    key3_flag = 1;
   73   1                      if(key4_status && !key4_last_status)    key4_flag = 1;
   74   1      
   75   1                      //±êÖ¾Î»ÖÃÎ»Ö®ºó£¬¿ÉÒÔÊ¹ÓÃ±êÖ¾Î»Ö´ÐÐ×Ô¼ºÏëÒª×öµÄÊÂ¼þ
   76   1                      KeystrokeLabel = 0;
   77   1                      if(key1_flag)   
   78   1                      {
   79   2                                      key1_flag = 0;//Ê¹ÓÃ°´¼üÖ®ºó£¬Ó¦¸ÃÇå³ý±êÖ¾Î»
   80   2                                      KeystrokeLabel = 1;
   81   2                      }
   82   1      
   83   1                      if(key2_flag)   
   84   1                      {
   85   2                                      key2_flag = 0;//Ê¹ÓÃ°´¼üÖ®ºó£¬Ó¦¸ÃÇå³ý±êÖ¾Î»
   86   2                                      KeystrokeLabel = 2;
   87   2                      }
   88   1      
   89   1                      if(key3_flag)   
   90   1                      {
   91   2                                      key3_flag = 0;//Ê¹ÓÃ°´¼üÖ®ºó£¬Ó¦¸ÃÇå³ý±êÖ¾Î»
   92   2                                      KeystrokeLabel = 3;
   93   2                      }
   94   1      
   95   1                      if(key4_flag)   
   96   1                      {
   97   2                                      key4_flag = 0;//Ê¹ÓÃ°´¼üÖ®ºó£¬Ó¦¸ÃÇå³ý±êÖ¾Î»
   98   2                                      KeystrokeLabel = 4;
   99   2                      }
  100   1      
  101   1      }
  102          
  103          
  104          
  105          void Cursor(void)
  106          {               
  107   1                      int i;
  108   1                      MenuNextFlag = 0;
  109   1      
  110   1                      while(MenuNextFlag == 0)
  111   1                      {               
  112   2                                      Keystroke_Scan();
  113   2                      
  114   2                                      if (KeystrokeLabel == 1)
  115   2                                      {
  116   3                                                      CursorRow--;
  117   3                                                      for (i = 0; i < 10; i++)
  118   3                                                      {
  119   4                                                      if(i == CursorRow)
  120   4                                                      lcd_showstr(0, CursorRow, ">");
  121   4                                                      else
  122   4                                                      lcd_showstr(0, i, " ");
  123   4                                                      }
C251 COMPILER V5.60.0,  key                                                                17/07/23  20:22:16  PAGE 3   

  124   3                                      }
  125   2                                      
  126   2                                      if (KeystrokeLabel == 2)
  127   2                                      {
  128   3                                                      CursorRow++;
  129   3                                                      for (i = 0; i < 10; i++)
  130   3                                                      {
  131   4                                                      if(i == CursorRow)
  132   4                                                      lcd_showstr(0, CursorRow, ">");
  133   4                                                      else
  134   4                                                      lcd_showstr(0, i, " ");
  135   4                                                      }
  136   3                                      }
  137   2                                      
  138   2                                      if (KeystrokeLabel == 3)
  139   2                                      {
  140   3                                                      MenuNextFlag = 1;
  141   3                                      }
  142   2                                      
  143   2                                      if (KeystrokeLabel == 4)
  144   2                                      {
  145   3                                                      MenuNextFlag = -1;
  146   3                                      }
  147   2                                      
  148   2                                      //¼ýÍ·ÏÞÎ»
  149   2                                      if (CursorRow< 0)
  150   2                                      {
  151   3                                              CursorRow= 0;
  152   3                                      }
  153   2                                      if (CursorRow> 9)
  154   2                                      {
  155   3                                              CursorRow= 0;
  156   3                                      }
  157   2                                      
  158   2                      }
  159   1                      
  160   1      }
  161                                          
  162          void KeystrokeLabel_Switch(float change_unit, uint8 value_bit)  //temp_value, ÉÏÒ»Ò³£¬ +-µÄµ¥Î»Öµ, ÉÈÇø´æ´
             -¢µÄÎ»ÖÃ±àºÅ
  163          {               
  164   1                              static float tem_value;
  165   1                              lcd_showfloat(11*8,6,tem_value,2,2);
  166   1                              //eeprom_init();
  167   1                      iap_read_bytes(0x00, date_buff, 100);           //´ÓEEPROMÖÐ¶ÁÈ¡Êý¾Ý
  168   1                      Motor_Kp_L                      = read_float(0);
  169   1                      Motor_Ki_L              = read_float(1);
  170   1                      Motor_Kp_R              = read_float(2);
  171   1                      Motor_Ki_R      = read_float(3);
  172   1                      angle_kp1               = read_float(4);
  173   1      //              ZX_kp                                           = read_float(5);
  174   1      //              ZX_kd                                           = read_float(6);
  175   1                      g_dirControl_P  = read_float(7);
  176   1                      g_dirControl_D   = read_float(8);               
  177   1      
  178   1      
  179   1                      Keystroke_Scan();
  180   1                              if (sw1_status == 0)
  181   1                              {
  182   2                                      change_unit *= 10; 
  183   2                              }
  184   1                              if (sw1_status == 0 && sw2_status == 0)
  185   1                              {
  186   2                                      change_unit *= 10; 
  187   2                              }
  188   1                       switch(KeystrokeLabel)
C251 COMPILER V5.60.0,  key                                                                17/07/23  20:22:16  PAGE 4   

  189   1          {
  190   2              case 0 :
  191   2                                                      Dispay_Codename = This_Codename;
  192   2                                                      break;
  193   2                                                      
  194   2                                      case KeystrokeONE :
  195   2                                                      tem_value += change_unit;       
  196   2                                                      save_float(tem_value,value_bit);
  197   2                                                      Dispay_Codename = This_Codename;                
  198   2                                                      break;
  199   2              case KeystrokeTWO :
  200   2                                                      tem_value -= change_unit;                       
  201   2                                                      save_float(tem_value,value_bit);
  202   2                                                      Dispay_Codename = This_Codename;                
  203   2                                                      break;
  204   2                                                      
  205   2              case KeystrokeTHREE :
  206   2                  Dispay_Codename /= 10; //·µ»ØÉÏÒ»Ò³
  207   2                  lcd_clear(WHITE);
  208   2                  break;
  209   2              case KeystrokeFOUR :
  210   2                  Dispay_Codename = 0;        //·µ»ØµÚ0Ò³
  211   2                  lcd_clear(WHITE);
  212   2                  break;
  213   2          }
  214   1      }
  215          void Keystroke_Special_Value(int* parameter)
  216          {
  217   1                      Keystroke_Scan();
  218   1                      switch(KeystrokeLabel)
  219   1                      {
  220   2                              case 0 :
  221   2                                              Dispay_Codename = This_Codename;
  222   2                                              break;
  223   2                                              
  224   2                              case KeystrokeONE :
  225   2                                              *parameter = -1;
  226   2                                              Dispay_Codename = This_Codename;                
  227   2                                              break;
  228   2                              case KeystrokeTWO :
  229   2                                              *parameter = 1;
  230   2                                              Dispay_Codename = This_Codename;                
  231   2                                              break;
  232   2                                              
  233   2                              case KeystrokeTHREE :
  234   2                                              Dispay_Codename /= 10; //·µ»ØÉÏÒ»Ò³
  235   2                                              lcd_clear(WHITE);
  236   2                                              break;
  237   2                              case KeystrokeFOUR :
  238   2                                              Dispay_Codename = 0;    //·µ»ØµÚ0Ò³
  239   2                                              lcd_clear(WHITE);
  240   2                                              break;
  241   2                      }
  242   1      }
  243          
  244          //-------------------------------------------------------------------------------------------------------
             -------------
  245          //  @brief      ²Ëµ¥Ä¿Â¼
  246          //  @param
  247          //  @param
  248          //  @param
  249          //  @param
  250          //  @return     void
  251          //  @note       ÆôÓÃwhileÀ´ÏÔÊ¾Ä¿±êÒ³Ãæ  ÔÚÃ¿¸öÒ³Ãæ°´¼ü°´¼üºó¶¼»á¸Ä±äµ½¶ÔÓ¦Ò³Ãæ£¬´Ëº¯ÊýÓÃÓÚ¸üÐÂÆÁÄ»ÏÔÊ¾
  252          //-------------------------------------------------------------------------------------------------------
             -------------
C251 COMPILER V5.60.0,  key                                                                17/07/23  20:22:16  PAGE 5   

  253          void Keystroke_Menu(void)
  254          {
  255   1          switch(Dispay_Codename)
  256   1          {
  257   2                                      case 0:
  258   2                                              Keystroke_Menu_HOME();
  259   2                                              break;
  260   2                                              
  261   2                                      case 1:
  262   2                                              Keystroke_Menu_ONE(); 
  263   2                                              break;
  264   2                                      case 11:
  265   2                                              Keystroke_Menu_ONE_One();
  266   2                                              break;
  267   2                                      case 12:
  268   2                                              Keystroke_Menu_ONE_Two();
  269   2                                              break;
  270   2                                      case 13:
  271   2                                              Keystroke_Menu_ONE_Three();
  272   2                                              break;
  273   2                                      case 14:
  274   2                                              Keystroke_Menu_ONE_Four();
  275   2                                              break;
  276   2                                              
  277   2                                      case 2:
  278   2                                              Keystroke_Menu_TWO();
  279   2                                              break;
  280   2                                      case 21:
  281   2                                              Keystroke_Menu_TWO_One();
  282   2                                              break;
  283   2                                      case 22:
  284   2                                              Keystroke_Menu_TWO_Two();
  285   2                                              break;
  286   2                                      case 23:
  287   2                                              Keystroke_Menu_TWO_Three();
  288   2                                              break;
  289   2                                      case 24:
  290   2                                              Keystroke_Menu_TWO_Four();
  291   2                                              break;
  292   2                                      case 26:
  293   2                                              Keystroke_Menu_TWO_Six();
  294   2                                              break;
  295   2                                      case 27:
  296   2                                              Keystroke_Menu_TWO_Seven();
  297   2                                              break;
  298   2                                      case 28:
  299   2                                              Keystroke_Menu_TWO_Eight();
  300   2                                              break;
  301   2      
  302   2                                              
  303   2                                      case 3:
  304   2                                              Keystroke_Menu_THREE();
  305   2                                              break;
  306   2                                      case 31:
  307   2                                              Keystroke_Menu_THREE_One();
  308   2                                              break;
  309   2                                      case 32:
  310   2                                              Keystroke_Menu_THREE_Two();
  311   2                                              break;
  312   2                                      case 33:
  313   2                                              Keystroke_Menu_THREE_Three();
  314   2                                              break;
  315   2                                      case 34:
  316   2                                              Keystroke_Menu_THREE_Four();
  317   2                                              break;
  318   2                                              
C251 COMPILER V5.60.0,  key                                                                17/07/23  20:22:16  PAGE 6   

  319   2                                      case 4:
  320   2                                              Keystroke_Menu_FOUR();
  321   2                                              break;
  322   2                      
  323   2                                      case 5:
  324   2                                              Keystroke_Menu_FIVE();
  325   2                                              break;
  326   2                                      case 51:
  327   2                                              Keystroke_Menu_FIVE_One();
  328   2                                              break;
  329   2                                      case 52:
  330   2                                              Keystroke_Menu_FIVE_Two();
  331   2                                              break;
  332   2                                      case 53:
  333   2                                              Keystroke_Menu_FIVE_Three();
  334   2                                              break;
  335   2                                      case 54:
  336   2                                              Keystroke_Menu_FIVE_Four();
  337   2                                              break;
  338   2                      }
  339   1                      
  340   1      }
  341          
  342          //-------------------------------------------------------------------------------------------------------
             -------------
  343          //  @brief      ×Ü²Ëµ¥Ä¿Â¼
  344          //  @param
  345          //  @param
  346          //  @param
  347          //  @param
  348          //  @return     void
  349          //  @note       ´ËÒ³ÃæÎª±àºÅÎª0
  350          //-------------------------------------------------------------------------------------------------------
             -------------
  351          void Keystroke_Menu_HOME(void)    //0
  352          {
  353   1                      lcd_showstr(1*8,1,"Start");
  354   1                      lcd_showstr(1*8,2,"AI_Control");
  355   1                      lcd_showstr(1*8,3,"Direction");
  356   1                      lcd_showstr(1*8,4,"Electrical");
  357   1                      lcd_showstr(1*8,5,"Page5");
  358   1                      
  359   1                      Cursor(); 
  360   1      
  361   1          switch(CursorRow)
  362   1          {
  363   2              case 0 :
  364   2                  Dispay_Codename = 0;
  365   2                  break;
  366   2                                                      
  367   2              case 1 :
  368   2                  Dispay_Codename = 1;
  369   2                  lcd_clear(WHITE);
  370   2                                                      CursorRow = 0;
  371   2                  break;
  372   2              case 2 :
  373   2                  Dispay_Codename = 2;
  374   2                  lcd_clear(WHITE);
  375   2                                                      CursorRow = 0;
  376   2                  break;
  377   2              case 3 :
  378   2                  Dispay_Codename = 3;
  379   2                  lcd_clear(WHITE);
  380   2                                                      CursorRow = 0;
  381   2                  break;
  382   2              case 4 :
C251 COMPILER V5.60.0,  key                                                                17/07/23  20:22:16  PAGE 7   

  383   2                                                      Dispay_Codename = 4;
  384   2                  lcd_clear(WHITE);
  385   2                                                      CursorRow = 0;
  386   2                  break;
  387   2                                      
  388   2                                      case 5 :
  389   2                                                      Dispay_Codename = 5;
  390   2                  lcd_clear(WHITE);
  391   2                                                      CursorRow = 0;
  392   2                                                      
  393   2          }
  394   1      }
  395          
  396          void Menu_ONE_Display(uint8 control_line)
  397          {
  398   1                      lcd_showstr(1*8,1,"Start_Flag");
  399   1                      lcd_showstr(1*8,2,"out_direction");
  400   1              
  401   1                      lcd_showint32(14*8,1,Start_Flag,1);
  402   1                      lcd_showint32(14*8,2,garage_out_direction,1);
  403   1                      
  404   1                      lcd_showstr(0,control_line,"&"); //&±êÖ¾ÌáÊ¾
  405   1      }
  406          
  407          void Keystroke_Menu_ONE(void) //1
  408          {               
  409   1                      Menu_ONE_Display(-1);
  410   1                      Cursor();
  411   1                      
  412   1                      if (MenuNextFlag == -1)
  413   1                      {
  414   2                                      CursorRow = -1;
  415   2                      }
  416   1                      
  417   1                      switch(CursorRow)
  418   1                      {               
  419   2                                      case -1 :
  420   2                                                      Dispay_Codename = 0;
  421   2                                                      lcd_clear(WHITE);
  422   2                                                      break;
  423   2                                      case 0 :
  424   2                                                      Dispay_Codename = 1;
  425   2                                                      break;
  426   2                                                      
  427   2                                      case 1 :
  428   2                                                      Dispay_Codename = 11;
  429   2                                              // lcd_clear(WHITE);
  430   2                                                      break;
  431   2                                      case 2 :
  432   2                                                      Dispay_Codename = 12;
  433   2                                                      lcd_clear(WHITE);
  434   2                                                      break;
  435   2                                      case 3 :
  436   2                                                      Dispay_Codename = 13;
  437   2                                                      lcd_clear(WHITE);
  438   2                                                      break;
  439   2                                      case 4 :
  440   2                                                      Dispay_Codename = 14;
  441   2                                                      lcd_clear(WHITE);
  442   2                                                      break;
  443   2                                      //case......
  444   2                      }
  445   1      
  446   1                      
  447   1      }
  448          
C251 COMPILER V5.60.0,  key                                                                17/07/23  20:22:16  PAGE 8   

  449          void Keystroke_Menu_ONE_One(void)  //11
  450          {               
  451   1                      This_Codename = 11;                     //±¾Ò³Ãæ±àºÅ
  452   1                      Menu_ONE_Display(1);
  453   1                      Keystroke_Special_Value(&Start_Flag);
  454   1      }
  455          
  456          void Keystroke_Menu_ONE_Two(void)  //12
  457          {               
  458   1                      This_Codename = 12;
  459   1                      Menu_ONE_Display(2);
  460   1                      Keystroke_Special_Value(&garage_out_direction);
  461   1      }
  462          
  463          void Keystroke_Menu_ONE_Three(void)  //13       
  464          {
  465   1                      This_Codename = 13;
  466   1                      Menu_ONE_Display(3);
  467   1                      
  468   1      }
  469          
  470          void Keystroke_Menu_ONE_Four(void)  //14
  471          {               
  472   1                      This_Codename = 14;
  473   1                      Menu_ONE_Display(4);
  474   1                      
  475   1      }
  476          
  477          void Menu_TWO_Display(uint8 control_line)
  478          {
  479   1                      lcd_showstr(1*8,1,"round1_type");
  480   1                      lcd_showstr(1*8,2,"round2_type");
  481   1                      lcd_showstr(1*8,3,"round3_type");
  482   1                      lcd_showstr(1*8,4,"round4_type");
  483   1                      
  484   1      //              lcd_showstr(1*8,6,"obsta1_type");
  485   1      //              lcd_showstr(1*8,7,"obsta2_type");
  486   1      //              lcd_showstr(1*8,8,"obsta3_type");
  487   1                      
  488   1                      if(round1_type == -1) 
  489   1                      {
  490   2                              lcd_showstr(12*8,1,"L");
  491   2                      }
  492   1                      else
  493   1                      {
  494   2                              lcd_showstr(12*8,1,"R");
  495   2                      }
  496   1                      if(round2_type == -1) 
  497   1                      {
  498   2                              lcd_showstr(12*8,2,"L");
  499   2                      }
  500   1                      else
  501   1                      {
  502   2                              lcd_showstr(12*8,2,"R");
  503   2                      }
  504   1                      if(round3_type == -1) 
  505   1                      {
  506   2                              lcd_showstr(12*8,3,"L");
  507   2                      }
  508   1                      else
  509   1                      {
  510   2                              lcd_showstr(12*8,3,"R");
  511   2                      }
  512   1                      if(round4_type == -1) 
  513   1                      {
  514   2                              lcd_showstr(12*8,4,"L");
C251 COMPILER V5.60.0,  key                                                                17/07/23  20:22:16  PAGE 9   

  515   2                      }
  516   1                      else
  517   1                      {
  518   2                              lcd_showstr(12*8,4,"R");
  519   2                      }
  520   1                      
  521   1                      lcd_showint32(14*8,1,round1_type,1);
  522   1                      lcd_showint32(14*8,2,round2_type,1);
  523   1                      lcd_showint32(14*8,3,round3_type,1);
  524   1                      lcd_showint32(14*8,4,round4_type,1);
  525   1                      
  526   1      //              lcd_showint32(14*8,6,obstacle1_type,1);
  527   1      //              lcd_showint32(14*8,7,obstacle2_type,1);
  528   1      //              lcd_showint32(14*8,8,obstacle3_type,1);
  529   1      
  530   1                      lcd_showstr(0,control_line,"&"); //&±êÖ¾ÌáÊ¾
  531   1      }
  532          void Keystroke_Menu_TWO(void) //2
  533          {               
  534   1                      Menu_TWO_Display(-1);
  535   1                      Cursor();
  536   1                      
  537   1                      if (MenuNextFlag == -1)
  538   1                      {
  539   2                                      CursorRow = -1;
  540   2                      }
  541   1                      
  542   1                      switch(CursorRow)
  543   1                      {               
  544   2                                      case -1 :
  545   2                                                      Dispay_Codename = 0;
  546   2                                                      lcd_clear(WHITE);
  547   2                                                      break;
  548   2                                      case 0 :
  549   2                                                      Dispay_Codename = 2;
  550   2                                                      break;
  551   2                                                      
  552   2                                      case 1 :
  553   2                                                      Dispay_Codename = 21;
  554   2                                              // lcd_clear(WHITE);
  555   2                                                      break;
  556   2                                      case 2 :
  557   2                                                      Dispay_Codename = 22;
  558   2                                                      lcd_clear(WHITE);
  559   2                                                      break;
  560   2                                      case 3 :
  561   2                                                      Dispay_Codename = 23;
  562   2                                                      lcd_clear(WHITE);
  563   2                                                      break;
  564   2                                      case 4 :
  565   2                                                      Dispay_Codename = 24;
  566   2                                                      lcd_clear(WHITE);
  567   2                                                      break;
  568   2                                                      
  569   2                                      case 6 :
  570   2                                                      Dispay_Codename = 26;
  571   2                                                      lcd_clear(WHITE);
  572   2                                                      break;
  573   2                                      case 7 :
  574   2                                                      Dispay_Codename = 27;
  575   2                                                      lcd_clear(WHITE);
  576   2                                                      break;
  577   2                                      case 8 :
  578   2                                                      Dispay_Codename = 28;
  579   2                                                      lcd_clear(WHITE);
  580   2                                                      break;          
C251 COMPILER V5.60.0,  key                                                                17/07/23  20:22:16  PAGE 10  

  581   2                                                      
  582   2                                      //case......
  583   2                      }
  584   1      
  585   1      }
  586          
  587          void Keystroke_Menu_TWO_One(void) //21
  588          {
  589   1                      This_Codename = 21;                     //±¾Ò³Ãæ±àºÅ
  590   1                      Menu_TWO_Display(1);
  591   1                      Keystroke_Special_Value(&round1_type);
  592   1      }
  593          void Keystroke_Menu_TWO_Two(void)  //22
  594          {
  595   1                      This_Codename = 22;                     //±¾Ò³Ãæ±àºÅ
  596   1                      Menu_TWO_Display(2);
  597   1                      Keystroke_Special_Value(&round2_type);
  598   1      }
  599          void Keystroke_Menu_TWO_Three(void)  //23
  600          {
  601   1                      This_Codename = 23;                     //±¾Ò³Ãæ±àºÅ
  602   1                      Menu_TWO_Display(3);
  603   1                      Keystroke_Special_Value(&round3_type);
  604   1      }
  605          void Keystroke_Menu_TWO_Four(void)  //24
  606          {
  607   1                      This_Codename = 24;                     //±¾Ò³Ãæ±àºÅ
  608   1                      Menu_TWO_Display(4);
  609   1                      Keystroke_Special_Value(&round4_type);
  610   1      }
  611          void Keystroke_Menu_TWO_Six(void)  //26
  612          {
  613   1                      This_Codename = 26;                     //±¾Ò³Ãæ±àºÅ
  614   1                      Menu_TWO_Display(6);
  615   1                      //Keystroke_Special_Value(&obstacle1_type);
  616   1      }
  617          void Keystroke_Menu_TWO_Seven(void)  //27
  618          {
  619   1                      This_Codename = 27;                     //±¾Ò³Ãæ±àºÅ
  620   1                      Menu_TWO_Display(7);
  621   1                      //Keystroke_Special_Value(&obstacle2_type);
  622   1      }
  623          void Keystroke_Menu_TWO_Eight(void)  //28
  624          {
  625   1                      This_Codename = 28;                     //±¾Ò³Ãæ±àºÅ
  626   1                      Menu_TWO_Display(8);
  627   1                      //Keystroke_Special_Value(&obstacle3_type);
  628   1      }
  629                          
  630                          
  631                          
  632          
  633          void Menu_THREE_Display(uint8 control_line)
  634          {
  635   1      //              lcd_showstr(1*8,1,"ZX_kp"); 
  636   1      //              lcd_showstr(1*8,2,"ZX_kd");
  637   1                      lcd_showstr(1*8,3,"g_dir_P");
  638   1                      lcd_showstr(1*8,4,"g_dir_D");
  639   1              
  640   1      //              lcd_showfloat(11*8,1,ZX_kp,2,2); 
  641   1      //              lcd_showfloat(11*8,2,ZX_kd,2,2);
  642   1                      lcd_showfloat(9*8,3,g_dirControl_P,2,3);
  643   1                      lcd_showfloat(9*8,4,g_dirControl_D,2,3);
  644   1      
  645   1                      lcd_showstr(0,control_line,"&"); //&±êÖ¾ÌáÊ¾
  646   1      }
C251 COMPILER V5.60.0,  key                                                                17/07/23  20:22:16  PAGE 11  

  647          
  648          void Keystroke_Menu_THREE(void) //3
  649          {               
  650   1                      Menu_THREE_Display(-1);
  651   1                      
  652   1                      Cursor();
  653   1                      
  654   1                      if (MenuNextFlag == -1)
  655   1                      {
  656   2                                      CursorRow = -1;
  657   2                      }
  658   1                      
  659   1                      switch(CursorRow)
  660   1                      {               
  661   2                                      case -1 :
  662   2                                                      Dispay_Codename = 0;
  663   2                                                      lcd_clear(WHITE);
  664   2                                                      break;
  665   2                                      case 0 :
  666   2                                                      Dispay_Codename = 3;
  667   2                                                      break;
  668   2                                                      
  669   2                                      case 1 :
  670   2                                                      Dispay_Codename = 31;
  671   2                                              // lcd_clear(WHITE);
  672   2                                                      break;
  673   2                                      case 2 :
  674   2                                                      Dispay_Codename = 32;
  675   2                                                      lcd_clear(WHITE);
  676   2                                                      break;
  677   2                                      case 3 :
  678   2                                                      Dispay_Codename = 33;
  679   2                                                      lcd_clear(WHITE);
  680   2                                                      break;
  681   2                                      case 4 :
  682   2                                                      Dispay_Codename = 34;
  683   2                                                      lcd_clear(WHITE);
  684   2                                                      break;
  685   2                                      //case......
  686   2                      }
  687   1      
  688   1      }
  689          
  690          void Keystroke_Menu_THREE_One(void)  //31
  691          {
  692   1                      This_Codename = 31;                     //±¾Ò³Ãæ±àºÅ
  693   1                      Menu_THREE_Display(1);
  694   1          KeystrokeLabel_Switch(0.01, 5);
  695   1      }
  696          
  697          void Keystroke_Menu_THREE_Two(void)  //32
  698          {               
  699   1                      This_Codename = 32;                     //±¾Ò³Ãæ±àºÅ
  700   1                      Menu_THREE_Display(2);
  701   1          KeystrokeLabel_Switch(0.01, 6);
  702   1      }
  703          
  704          void Keystroke_Menu_THREE_Three(void)  //33
  705          {               
  706   1                      This_Codename = 33;                     //±¾Ò³Ãæ±àºÅ
  707   1                      Menu_THREE_Display(3);
  708   1          KeystrokeLabel_Switch(0.01, 7);
  709   1      }
  710          
  711          void Keystroke_Menu_THREE_Four(void)  //34
  712          {               
C251 COMPILER V5.60.0,  key                                                                17/07/23  20:22:16  PAGE 12  

  713   1                      This_Codename = 34;                     //±¾Ò³Ãæ±àºÅ
  714   1                      Menu_THREE_Display(4);
  715   1          KeystrokeLabel_Switch(0.01, 8);
  716   1      }
  717          
  718          void Keystroke_Menu_FOUR(void) //4
  719          {
  720   1                      
  721   1                      lcd_showfloat(5,0,g_ValueOfAD[0],4,2);//×óÊú            
  722   1                      lcd_showfloat(65,0,g_ValueOfAD[5],4,2);   //ÓÒÊú        
  723   1                      lcd_showfloat(5,1,g_ValueOfAD[3],4,2);  //×óºá  
  724   1                      lcd_showfloat(65,1,g_ValueOfAD[2],4,2);  //ÓÒºá
  725   1                      lcd_showfloat(5,2,g_ValueOfAD[4],4,2);//ÓÒÐ±                      
  726   1                      lcd_showfloat(65,2,g_ValueOfAD[1],4,2);  //×óÐ± 
  727   1                      lcd_showstr(1*8,3,"|05   -32   /41"); 
  728   1                      
  729   1                      lcd_showfloat(5,4,Target_speed1,4,0);
  730   1                      lcd_showfloat(65,4,Target_speed2,4,0);
  731   1                      lcd_showfloat(5,5,servo,3,0);
  732   1                      lcd_showfloat(65,5,roundcount2,5,0);
  733   1                      
  734   1                      lcd_showfloat(5,6,v_angle,4,3); 
  735   1                      lcd_showfloat(65,6,angle,4,3); 
  736   1      
  737   1      
  738   1                      lcd_showfloat(5,7,y_v_angle,4,3); 
  739   1                      //lcd_showfloat(65,7,angle_y,4,3);
  740   1                      lcd_showfloat(65,7,roundcount2_k,4,0);
  741   1                      
  742   1                      lcd_showfloat(5,8,e_r1,5,0);
  743   1                      lcd_showfloat(65,8,e_r2,5,0);
  744   1                      lcd_showfloat(5,9,dl1a_distance_mm,4,0);
  745   1                      lcd_showint32(8*8, 9, obstacle_flag, 1);
  746   1                      lcd_showint32(10*8, 9, obstacle_number, 1);
  747   1                      
  748   1                      Keystroke_Scan();
  749   1                      switch(KeystrokeLabel)
  750   1                      {
  751   2                                      case 0 :
  752   2                                                      Dispay_Codename = 4;
  753   2                                                      break;
  754   2      //                              case KeystrokeONE :
  755   2      //                                              Dispay_Codename = 41;
  756   2      //                                       lcd_clear(WHITE);
  757   2      //                                              break;
  758   2      //                              case KeystrokeTWO :
  759   2      //                                              Dispay_Codename = 42;
  760   2      //                                              lcd_clear(WHITE);
  761   2      //                                              break;
  762   2      //                              case KeystrokeTHREE :
  763   2      //                                              Dispay_Codename = 43;
  764   2      //                                              lcd_clear(WHITE);
  765   2      //                                              break;
  766   2                                      case KeystrokeFOUR :
  767   2                                                      Dispay_Codename = 0;            //·µ»ØµÚ0Ò³
  768   2                                                      lcd_clear(WHITE);
  769   2                                                      break;
  770   2                      }
  771   1      }
  772          
  773          
  774          
  775          
  776          void Menu_FIVE_Display(uint8 control_line)
  777          {
  778   1                      lcd_showstr(1*8,1,"gd_P"); 
C251 COMPILER V5.60.0,  key                                                                17/07/23  20:22:16  PAGE 13  

  779   1                      lcd_showfloat(65,1,g_dirControl_P,2,3);
  780   1                      lcd_showstr(1*8,2,"gd_D"); 
  781   1                      lcd_showfloat(65,2,g_dirControl_D,2,3);
  782   1      
  783   1                      
  784   1                      lcd_showstr(1*8,7,"gErr2"); 
  785   1                      lcd_showfloat(65,7,g_fDirectionError[2],4,3);
  786   1                      lcd_showstr(1*8,8,"chaerr1"); 
  787   1                      lcd_showfloat(65,8,cha_err1,4,3);
  788   1                      lcd_showstr(1*8,9,"servo"); 
  789   1                      lcd_showfloat(65,9,servo,4,3);
  790   1                      
  791   1                      lcd_showstr(0,control_line,"&"); //&±êÖ¾ÌáÊ¾
  792   1      }
  793          
  794          void Keystroke_Menu_FIVE(void) //5
  795          {               
  796   1                      Menu_FIVE_Display(-1);          
  797   1                      Cursor();
  798   1                      
  799   1                      if (MenuNextFlag == -1)
  800   1                      {
  801   2                                      CursorRow = -1;
  802   2                      }
  803   1                      
  804   1                      switch(CursorRow)
  805   1                      {               
  806   2                                      case -1 :
  807   2                                                      Dispay_Codename = 0;
  808   2                                                      lcd_clear(WHITE);
  809   2                                                      break;
  810   2                                      case 0 :
  811   2                                                      Dispay_Codename = 5;
  812   2                                                      break;
  813   2                                                      
  814   2                                      case 1 :
  815   2                                                      Dispay_Codename = 51;
  816   2                                                lcd_clear(WHITE);
  817   2                                                      break;
  818   2                                      case 2 :
  819   2                                                      Dispay_Codename = 52;
  820   2                                                      lcd_clear(WHITE);
  821   2                                                      break;
  822   2                                      case 3 :
  823   2                                                      Dispay_Codename = 53;
  824   2                                                      lcd_clear(WHITE);
  825   2                                                      break;
  826   2                                      case 4 :
  827   2                                                      Dispay_Codename = 54;
  828   2                                                      lcd_clear(WHITE);
  829   2                                                      break;
  830   2                                      //case......
  831   2                      }
  832   1      
  833   1      }
  834          
  835          void Keystroke_Menu_FIVE_One(void)  //51
  836          {
  837   1                      float change_unit = 0.001;
  838   1                      This_Codename = 51;                     //±¾Ò³Ãæ±àºÅ
  839   1                      Menu_FIVE_Display(1);           
  840   1              
  841   1                      Keystroke_Scan();
  842   1                      if (sw1_status == 0)
  843   1                      {
  844   2                              change_unit = 0.01; 
C251 COMPILER V5.60.0,  key                                                                17/07/23  20:22:16  PAGE 14  

  845   2                      }
  846   1                      if (sw1_status == 0 && sw2_status == 0)
  847   1                      {
  848   2                              change_unit = 0.1; 
  849   2                      }
  850   1      
  851   1                      switch(KeystrokeLabel)
  852   1          {
  853   2              case 0 :
  854   2                                                      Dispay_Codename = This_Codename;
  855   2                                                      break;
  856   2                                                      
  857   2                                      case KeystrokeONE :
  858   2                                                      g_dirControl_P += change_unit;  
  859   2                                      
  860   2                                                      Dispay_Codename = This_Codename;                
  861   2                                                      break;
  862   2              case KeystrokeTWO :
  863   2                                                      g_dirControl_P -= change_unit;                  
  864   2              
  865   2                                                      Dispay_Codename = This_Codename;                
  866   2                                                      break;
  867   2                                                      
  868   2              case KeystrokeTHREE :
  869   2                  Dispay_Codename /= 10; //·µ»ØÉÏÒ»Ò³
  870   2                  lcd_clear(WHITE);
  871   2                  break;
  872   2              case KeystrokeFOUR :
  873   2                  Dispay_Codename = 0;        //·µ»ØµÚ0Ò³
  874   2                  lcd_clear(WHITE);
  875   2                  break;
  876   2          }
  877   1      
  878   1      }
  879          
  880          void Keystroke_Menu_FIVE_Two(void)  //52
  881          {
  882   1                      float change_unit = 0.001;
  883   1                      This_Codename = 52;                     //±¾Ò³Ãæ±àºÅ
  884   1                      Menu_FIVE_Display(2);           
  885   1                      Keystroke_Scan();
  886   1                      if (sw1_status == 0)
  887   1                      {
  888   2                              change_unit = 0.01; 
  889   2                      }
  890   1                      if (sw1_status == 0 && sw2_status == 0)
  891   1                      {
  892   2                              change_unit = 0.1; 
  893   2                      }
  894   1      
  895   1                      switch(KeystrokeLabel)
  896   1          {
  897   2              case 0 :
  898   2                                                      Dispay_Codename = This_Codename;
  899   2                                                      break;
  900   2                                                      
  901   2                                      case KeystrokeONE :
  902   2                                                      g_dirControl_D += change_unit;  
  903   2                                                      Dispay_Codename = This_Codename;                
  904   2                                                      break;
  905   2              case KeystrokeTWO :
  906   2                                                      g_dirControl_D -= change_unit;                  
  907   2                                                      Dispay_Codename = This_Codename;                
  908   2                                                      break;
  909   2                                                      
  910   2              case KeystrokeTHREE :
C251 COMPILER V5.60.0,  key                                                                17/07/23  20:22:16  PAGE 15  

  911   2                  Dispay_Codename /= 10; //·µ»ØÉÏÒ»Ò³
  912   2                  lcd_clear(WHITE);
  913   2                  break;
  914   2              case KeystrokeFOUR :
  915   2                  Dispay_Codename = 0;        //·µ»ØµÚ0Ò³
  916   2                  lcd_clear(WHITE);
  917   2                  break;
  918   2          }
  919   1      }
  920          
  921          void Keystroke_Menu_FIVE_Three(void)  //53
  922          {
  923   1                      float change_unit = 0.001;
  924   1                      This_Codename = 53;                     //±¾Ò³Ãæ±àºÅ
  925   1                      Menu_FIVE_Display(3);                   
  926   1                      Keystroke_Scan();
  927   1                      if (sw1_status == 0)
  928   1                      {
  929   2                              change_unit = 0.01; 
  930   2                      }
  931   1                      if (sw1_status == 0 && sw2_status == 0)
  932   1                      {
  933   2                              change_unit = 0.1; 
  934   2                      }
  935   1      
  936   1                      switch(KeystrokeLabel)
  937   1          {
  938   2              case 0 :
  939   2                                                      Dispay_Codename = This_Codename;
  940   2                                                      break;
  941   2                                                      
  942   2      //                              case KeystrokeONE :
  943   2      //                                              g_fDirectionError_2_proportion_1 += change_unit;        
  944   2      //                                              Dispay_Codename = This_Codename;                
  945   2      //                                              break;
  946   2      //        case KeystrokeTWO :
  947   2      //                                              g_fDirectionError_2_proportion_1 -= change_unit;                        
  948   2      //                                              Dispay_Codename = This_Codename;                
  949   2      //                                              break;
  950   2                                                      
  951   2              case KeystrokeTHREE :
  952   2                  Dispay_Codename /= 10; //·µ»ØÉÏÒ»Ò³
  953   2                  lcd_clear(WHITE);
  954   2                  break;
  955   2              case KeystrokeFOUR :
  956   2                  Dispay_Codename = 0;        //·µ»ØµÚ0Ò³
  957   2                  lcd_clear(WHITE);
  958   2                  break;
  959   2          }
  960   1      }
  961          
  962          void Keystroke_Menu_FIVE_Four(void)  //54
  963          {
  964   1                      float change_unit = 0.001;
  965   1                      This_Codename = 54;                     //±¾Ò³Ãæ±àºÅ
  966   1                      Menu_FIVE_Display(4);           
  967   1                      
  968   1              
  969   1                      Keystroke_Scan();
  970   1                      if (sw1_status == 0)
  971   1                      {
  972   2                              change_unit = 0.01; 
  973   2                      }
  974   1                      if (sw1_status == 0 && sw2_status == 0)
  975   1                      {
  976   2                              change_unit = 0.1; 
C251 COMPILER V5.60.0,  key                                                                17/07/23  20:22:16  PAGE 16  

  977   2                      }
  978   1      
  979   1                      switch(KeystrokeLabel)
  980   1          {
  981   2              case 0 :
  982   2                                                      Dispay_Codename = This_Codename;
  983   2                                                      break;
  984   2                                                      
  985   2      //                              case KeystrokeONE :
  986   2      //                                              g_fDirectionError_2_proportion_2 += change_unit;        
  987   2      //                                              Dispay_Codename = This_Codename;                
  988   2      //                                              break;
  989   2      //        case KeystrokeTWO :
  990   2      //                                              g_fDirectionError_2_proportion_2 -= change_unit;                        
  991   2      //                                              Dispay_Codename = This_Codename;                
  992   2      //                                              break;
  993   2                                                      
  994   2              case KeystrokeTHREE :
  995   2                  Dispay_Codename /= 10; //·µ»ØÉÏÒ»Ò³
  996   2                  lcd_clear(WHITE);
  997   2                  break;
  998   2              case KeystrokeFOUR :
  999   2                  Dispay_Codename = 0;        //·µ»ØµÚ0Ò³
 1000   2                  lcd_clear(WHITE);
 1001   2                  break;
 1002   2          }
 1003   1      }
*** WARNING C183 IN LINE 923 OF key.c: dead assignment eliminated
*** WARNING C183 IN LINE 929 OF key.c: dead assignment eliminated
*** WARNING C183 IN LINE 933 OF key.c: dead assignment eliminated
*** WARNING C183 IN LINE 964 OF key.c: dead assignment eliminated
*** WARNING C183 IN LINE 972 OF key.c: dead assignment eliminated
*** WARNING C183 IN LINE 976 OF key.c: dead assignment eliminated


Module Information          Static   Overlayable
------------------------------------------------
  code size            =    ------     ------
  ecode size           =      3941     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =    ------     ------
  xdata-const size     =    ------     ------
  edata size           =        26          1
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =       241     ------
End of Module Information.


C251 COMPILATION COMPLETE.  6 WARNING(S),  0 ERROR(S)
